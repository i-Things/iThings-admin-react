# iThings çš„åå°å‰ç«¯

iThings çš„åå°å‰ç«¯é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Antd Pro ç»„ä»¶é£æ ¼ï¼Œä½¿ç”¨ umi è„šæ‰‹æ¶æ­å»ºçš„ç³»ç»Ÿçº§å‰ç«¯é¡¹ç›®ã€‚

## ç¯å¢ƒå‡†å¤‡

å®‰è£… `node_modules`:

```bash
yarn
```

## è„šæœ¬å‘½ä»¤

å‰ç«¯é¡¹ç›®æä¾›ä¸€äº›è„šæœ¬å‘½ä»¤å¯ä»¥ç”¨æ¥å¯åŠ¨é¡¹ç›®ã€é¡¹ç›®æ‰“åŒ…ã€æ£€æŸ¥ä»£ç é£æ ¼ã€è§„èŒƒå’Œå•å…ƒæµ‹è¯•ã€‚æ‰€æœ‰è„šæœ¬å‘½ä»¤ç»Ÿä¸€æ”¾ç½®åœ¨ `package.json` æ–‡ä»¶ä¸­ï¼Œè¿™å¯¹äºä¿®æ”¹æˆ–è€…æ·»åŠ å…¶ä»–è„šæœ¬å‘½ä»¤æ¥è¯´ååˆ†ç®€å•å’Œå®‰å…¨ã€‚

### å¯åŠ¨é¡¹ç›®

```bash
// ä½¿ç”¨ mock æ¥å£
yarn start
```

```bash
// ä¸ä½¿ç”¨ mock æ¥å£
yarn dev
```

### é¡¹ç›®æ‰“åŒ…

```bash
yarn build
```

### æ£€æŸ¥ä»£ç é£æ ¼ã€è§„èŒƒ

```bash
yarn lint
```

ä½ ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œä¿®å¤:

```bash
yarn lint:fix
```

### å•å…ƒæµ‹è¯•

```bash
yarn test
```

## æ›´å¤š

## æ–‡ä»¶å‘½åè§„èŒƒ

- æ¨èï¼šReact ç»„ä»¶çš„æ–‡ä»¶å¤¹å‘½åéƒ½æ˜¯å¤§é©¼å³°+ å•æ•°ï¼Œå…¶ä»–æ–‡ä»¶å¤¹éƒ½æ˜¯å°é©¼å³°+ å¤æ•°ã€‚
- æ¨èï¼šæ–‡ä»¶å‘½åéƒ½æ˜¯å°é©¼å³°ï¼Œå•å¤æ•°çœ‹æƒ…å½¢ã€‚
- æ¨èï¼šæ–¹æ³•åéƒ½æ˜¯å°é©¼å³°ï¼Œå•å¤æ•°çœ‹æƒ…å½¢ã€‚
- æ¨èï¼šå˜é‡åé™¤å¸¸é‡å¤–éƒ½æ˜¯å°é©¼å³°ï¼Œå•å¤æ•°çœ‹æƒ…å½¢ã€‚
- æ¨èï¼šå¸¸é‡åéƒ½æ˜¯å…¨å¤§å†™å­—æ¯+ ä¸‹åˆ’çº¿åˆ†éš”ï¼Œå•å¤æ•°çœ‹æƒ…å½¢ã€‚

## ç›®å½•ç»“æ„

```md
â”œâ”€â”€ README.md // é¡¹ç›®ä»‹ç»
â”œâ”€â”€ config // é…ç½®æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ config.dev.ts //å¼€å‘æ—¶é…ç½®
â”‚   â”œâ”€â”€ config.ts // åŸºæœ¬é…ç½®
â”‚   â”œâ”€â”€ defaultSettings.ts // é»˜è®¤è®¾ç½®
â”‚   â”œâ”€â”€ iThingsapi.json // openApiå¯¼å‡ºçš„JSON
â”‚   â”œâ”€â”€ proxy.ts // æœ¬åœ°å¼€å‘æ—¶ä»£ç†é…ç½®
â”‚   â””â”€â”€ routes.ts // è·¯ç”±è¡¨
â”œâ”€â”€ deploy.sh // éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ jest.config.js // å•å…ƒæµ‹è¯•ç›¸å…³
â”œâ”€â”€ jsconfig.json // å•å…ƒæµ‹è¯•ç›¸å…³
â”œâ”€â”€ mock // æœ¬åœ° mock æ–‡ä»¶å¤¹
â”‚   â””â”€â”€ user.ts
â”œâ”€â”€ package.json // ä¾èµ–
â”œâ”€â”€ public // å…¬å…±èµ„æºç›®å½•
â”‚   â”œâ”€â”€ CNAME
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ favicon.png
â”‚   â”œâ”€â”€ icons
â”‚   â”‚   â”œâ”€â”€ icon-128x128.png
â”‚   â”‚   â”œâ”€â”€ icon-192x192.png
â”‚   â”‚   â”œâ”€â”€ icon-512x512.png
â”‚   â”‚   â”œâ”€â”€ icon_data_01.png
â”‚   â”‚   â””â”€â”€ logo.png
â”‚   â””â”€â”€ pro_icon.svg
â”œâ”€â”€ src // ä¸»æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ access.ts // plugin-access æ’ä»¶ä¾èµ–æ–‡ä»¶
â”‚   â”œâ”€â”€ app.tsx // åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ assets // é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ icons
â”‚   â”‚   â””â”€â”€ img
â”‚   â”œâ”€â”€ components // å…¬å…±ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ Footer
â”‚   â”‚   â”œâ”€â”€ HeaderDropdown
â”‚   â”‚   â””â”€â”€ RightContent
â”‚   â”œâ”€â”€ global.less
â”‚   â”œâ”€â”€ global.tsx
â”‚   â”œâ”€â”€ hooks // è‡ªå®šä¹‰ hook æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ useTitle.ts
â”‚   â”œâ”€â”€ layouts // å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ BasicLayout.tsx
â”‚   â”‚   â””â”€â”€ BlankLayout.tsx
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ pages // é¡µé¢æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ 404.tsx
â”‚   â”‚   â”œâ”€â”€ Admin.tsx
â”‚   â”‚   â”œâ”€â”€ Welcome.less
â”‚   â”‚   â”œâ”€â”€ Welcome.tsx
â”‚   â”‚   â”œâ”€â”€ device // è®¾å¤‡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ document.ejs
â”‚   â”‚   â”œâ”€â”€ product // äº§å“æ¨¡å—
â”‚   â”‚   â””â”€â”€ user // ç”¨æˆ·ç™»å½•æ¨¡å—
â”‚   â”œâ”€â”€ service-worker.js
â”‚   â”œâ”€â”€ services // ç”± openApi ç”Ÿæˆçš„å¼‚æ­¥è¯·æ±‚æ–‡ä»¶ï¼Œä½¿ç”¨æ–¹æ³•è§ pages/user
â”‚   â”‚   â””â”€â”€ iThingsapi
â”‚   â”œâ”€â”€ typings.d.ts // ç±»å‹å£°æ˜
â”‚   â””â”€â”€ utils // å·¥å…·æ–¹æ³•ç›®å½•
â”‚       â”œâ”€â”€ const.ts // å¸¸é‡è¡¨
â”‚       â”œâ”€â”€ date.ts // æ—¶é—´|æ—¥æœŸç›¸å…³æ–¹æ³•
â”‚       â”œâ”€â”€ iconMap.ts // èœå•å›¾è¡¨å¯¹åº”Map
â”‚       â”œâ”€â”€ request.ts // å°è£…çš„è¯·æ±‚ç›¸å…³
â”‚       â””â”€â”€ utils.ts // å¸¸è§„å·¥å…·æ–¹æ³•
â”œâ”€â”€ tests // å•å…ƒæµ‹è¯•ç›¸å…³
â”‚   â”œâ”€â”€ PuppeteerEnvironment.js
â”‚   â”œâ”€â”€ beforeTest.js
â”‚   â”œâ”€â”€ getBrowser.js
â”‚   â”œâ”€â”€ run-tests.js
â”‚   â””â”€â”€ setupTests.js
â”œâ”€â”€ tsconfig.json // ts é…ç½®æ–‡ä»¶
â”œâ”€â”€ types // å…¨å±€ç±»å‹å£°æ˜æ–‡ä»¶
â”‚   â”œâ”€â”€ base.ts
â”‚   â”œâ”€â”€ postcss-px2viewport.d.ts
â”‚   â””â”€â”€ userInfo
â”‚       â”œâ”€â”€ data.d.ts
â”‚       â””â”€â”€ service.ts
â”œâ”€â”€ yarn-error.log
â””â”€â”€ yarn.lock
```

## é¡¹ç›®æ¶æ„ä»‹ç»

react + umi + react hooks + TypeScript + Ant design Pro

Ant design Pro: Ant design Pro çš„åº•åº§æ˜¯ umiï¼Œumi æ˜¯ä¸€ä¸ª webpack ä¹‹ä¸Šçš„æ•´åˆå·¥å…·ã€‚ umi ç›¸æ¯”äº webpack å¢åŠ äº†è¿è¡Œæ—¶çš„èƒ½åŠ›ï¼ŒåŒæ—¶å¸®åŠ©æˆ‘ä»¬é…ç½®äº†å¾ˆå¤š webpack çš„é¢„è®¾ã€‚ä¹Ÿå‡å°‘äº† webpack å‡çº§å¯¼è‡´çš„é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬èƒ½æä¾›æ’ä»¶çš„åŸå› ã€‚

Ant design Proæ–‡æ¡£æ€»è§ˆ: [æ–‡æ¡£](https://pro.ant.design/zh-CN/docs/overview)

Ant design Proå¼€å‘éœ€çŸ¥ï¼š [å¼€å‘éœ€çŸ¥](https://pro.ant.design/zh-CN/docs/introduction/)

æ‰€ä½¿ç”¨åˆ°çš„ umi æ’ä»¶ï¼š

plugin-accessï¼Œæƒé™ç®¡ç†

plugin-antdï¼Œæ•´åˆ antd UI ç»„ä»¶

plugin-initial-stateï¼Œåˆå§‹åŒ–æ•°æ®ç®¡ç†

plugin-layoutï¼Œé…ç½®å¯ç”¨ ant-design-pro çš„å¸ƒå±€

plugin-modelï¼ŒåŸºäº hooks çš„ç®€æ˜“æ•°æ®æµ

ä½¿ç”¨çš„ react hooks å·¥å…·æ–¹æ³•åº“ï¼š
ahooks: [ahooks](https://ahooks.js.org/zh-CN/hooks/use-request/index)

## åˆ†æ”¯è§„èŒƒ

é‡‡å– mtr åˆ†æ”¯æ¨¡å‹ï¼š

ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯ä¸€ä¸ª feat åˆ†æ”¯ã€‚å‘½ä»¤è§„èŒƒä¸º feat-xxxã€‚(ä¸¾ä¸ªğŸŒ°ï¼š feat-user)

å¼€å‘åŠä»£ç æäº¤æ­¥éª¤ï¼š æœ¬åœ°å¼€å‘ ==> ä»£ç æäº¤å‰çš„ä»£ç æ£€æŸ¥(å·²é…ç½®git hooks, ä»£ç æäº¤å‰ä¼šè‡ªåŠ¨æ£€æŸ¥) ==> ä»£ç æ£€æŸ¥é€šè¿‡ ==> ä»£ç æäº¤åˆ° test åˆ†æ”¯ ==> å‘ŠçŸ¥å›¢é˜Ÿå…¶ä»–æˆå‘˜ä»£ç å·²æäº¤ï¼Œè¯·å¸®å¿™ code review ==> code review é€šè¿‡   ==> åˆå¹¶åˆ° test åˆ†æ”¯  ==> æµ‹è¯•ç¯å¢ƒéªŒè¯å®Œæ¯• ==> åˆå¹¶åˆ° master åˆ†æ”¯ã€‚

## å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼Œæ–‡ä»¶å¤¹ç»„ç»‡æ–¹å¼

```md
â”œâ”€â”€ components // æŸä¸ªä¸šåŠ¡æ¨¡å—ä¸‹å…±æœ‰çš„ç»„ä»¶
â”‚   â””â”€â”€ Dialog.tsx // å¼¹çª—ç»„ä»¶
â”œâ”€â”€ index.tsx // ä¸šåŠ¡æ¨¡å—ä¸»å…¥å£
â”œâ”€â”€ styles.less // æŠ½ç¦»å‡ºæ¥çš„ less æ–‡ä»¶
â””â”€â”€ types.d.ts // æŠ½ç¦»å‡ºæ¥çš„ ts ç±»å‹å®šä¹‰æ–‡ä»¶
```

## æœ¬åœ°å¼€å‘æ—¶ï¼Œçƒ­åŠ è½½æ¯”è¾ƒæ…¢

react ä¹Ÿæœ‰è§£å†³æ–¹æ¡ˆï¼š

1. vite è¿›è¡Œæœ¬åœ°å¼€å‘çš„çƒ­åŠ è½½æ–¹æ¡ˆ.
2. ä½¿ç”¨ mfsu . // å¼€å¯æ–¹æ³•ï¼Œconfig/confog.ts æ–‡ä»¶ä¸­é…ç½®  mfsu.

## openAPI ä½¿ç”¨æ–¹æ³•ä»‹ç»

![opanAPI](https://tva1.sinaimg.cn/large/e6c9d24egy1h5mtjmhv68g213l0khkjr.gif)
